# Шаблон Zabbix для мониторига панели Netangels

Читать на других языках: [English](README.md), [Русский](README.ru-RU.md).

## Обзор
Шаблон Zabbix для мониторинга баланса и состояния вашего аккаунта у хостинг-провайдера https://netangels.ru/.

Основано на Netangels API: https://api.netangels.ru/panel/user.html

Шаблон тестировался на:

 * Zabbix 5.0 LTS
 * Ubuntu 20.04
 * Armbian 21.02.2 Buster

## Установка

 * скопируйте `netangels.userinfo.conf` в директорию `/etc/zabbix/zabbix_agentd.d` 
 * перезапустите zabbix-agent
 * импортируйте шаблон `zbx_netangels_teplate.xml` на сервер Zabbix
 * присоедините шаблон к узлу, для zabbix-agent которого была добавлена конфигурация
 * добавьте необходимые макросы к узлу. Обязательно нужны логин и ключ API (или пароль).

## Макросы шаблона
`{$NETANGELS.USERNAME}` -- ваш логин. Обязательно.  
`{$NETANGELS.PASSWORD}` -- ваш ключ API или пароль. Обязательно.  

`{$NETANGELS.BALANCE.CRITICAL}` -- Пороговое значение критического баланса.  
`{$NETANGELS.BALANCE.LOW}` -- Пороговое значение низкого баланса.  
`{$NETANGELS.BALANCE.DECREASE}` -- Уменьшение баланса между двумя последними запросами на значение болшее, чем это, вызовет срабатывание триггера.  

`{$NETANGELS.PANEL.URL}` -- URL панели управления. По умолчанию менять не требуется.  

## Элементы данных

#### Netangels User Info
Базовый элемент данных для получаемого от Netangels ответа. Должен быть в JSON.

#### Current balance
Значение текущего баланса.

#### Account state. 
Может быть "enabled", "disabled", "test", "waiting" или "new". 
Также может быть "empty" если предобработка JSONPath завершилась неудачно. Такой подход позволяет определить, что получены некорректные данные.

#### Admin E-mail
Административные почтовые ящики, привязанные к панели. Может быть несколько.

#### Technical E-mail
Технические почтовые ящики, привязанные к панели. Может быть несколько.

## Прочее
